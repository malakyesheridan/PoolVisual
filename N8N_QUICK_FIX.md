# Quick Fix: Download Image with Masks

## The Simplest Solution

You already have `maskImageUrl` in your webhook payload! Just add a second HTTP Request node to download it.

### Step 1: Add Second HTTP Request Node
1. **Right-click** on your current "Download Image" HTTP Request node
2. **Duplicate** it (or create a new one)
3. **Change the URL** to: `{{ $json.body.maskImageUrl }}`
4. **Name it**: "Download Mask Image"

### Step 2: That's It!
Now you have:
- **First node**: Downloads original image from `{{ $json.body.imageUrl }}`
- **Second node**: Downloads mask image from `{{ $json.body.maskImageUrl }}`

Both images can be uploaded to Dropbox and used for analysis.

---

## What You'll Get

1. **Original Image**: The unedited photo (JPEG)
2. **Mask Image**: Black/white PNG where:
   - **White pixels** = masked regions (areas to modify)
   - **Black pixels** = background (unchanged)

---

## Handle Missing Masks (Optional)

If there are no masks, `maskImageUrl` will be `null`. Add an IF node:

1. **Add IF node** before "Download Mask Image"
2. **Condition**: `{{ $json.body.maskImageUrl }}` exists
3. **True**: Download mask image
4. **False**: Skip (or set placeholder)

---

## Why This Works

- `maskImageUrl` is a **public URL** to a PNG file (just like the original image)
- It's already generated by the server
- You just need to download it like any other image
- No need to process coordinates or create complex requests

---

## Testing

1. Check webhook execution in n8n
2. Verify `maskImageUrl` appears in the payload
3. The second HTTP Request should download a black/white PNG
4. Both files should be available for Dropbox upload and analysis

